<mat-toolbar class="toolbar">
  <span class="title">Citizenship Quiz</span>
  <span class="spacer"></span>
  <span class="stats">
    <span class="score" [ngClass]="{'positive': score > 0, 'neutral': score === 0}">{{ score }}</span>
    <span class="divider">|</span>
    <span class="counter">{{ questionsAnswered }} answered</span>
  </span>
  <button mat-icon-button class="reset-button" (click)="resetScore()" aria-label="Reset score">
    <mat-icon [style.color]="'white'">refresh</mat-icon>
  </button>
</mat-toolbar>

<main class="main-container">
  @if (getCurrentQuestion()) {
    <div class="card-wrapper" [@fadeInOut]>
      <mat-card class="card">
        <mat-card-content>
          <p class="question-text">
            {{ getCurrentQuestion()!.question }}
          </p>

          <div class="options-container" [@staggerOptions]>
            @for (option of getCurrentQuestion()!.options; track option; let i = $index) {
              <div class="option-item"
                   [@optionAnimation]
                   [ngClass]="{
       'correct-option': showAnswer && i === getCurrentQuestion()!.correctOptionIndex,
       'incorrect-option': showAnswer && i === selectedOption && i !== getCurrentQuestion()!.correctOptionIndex,
       'selected': selectedOption === i
     }"
                   (click)="!showAnswer && selectOption(i)"
                   [attr.aria-selected]="selectedOption === i"
                   [attr.role]="'option'"
                   [attr.aria-disabled]="showAnswer">
                {{ option }}
              </div>
            }
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  }
</main>
